<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.xiaot.factory.dao.DashboardDao">

    <select id="overview" resultType="map">
        select
            (select sum(op.purchase_total) from od_purchase op) purchaseCount,
            (select sum(op.purchase_total) from od_purchase op where year(op.create_time) = year(now())) purchaseYear,
            (select sum(op.purchase_total) from od_purchase op where year(op.create_time) = year(now()) and month(op.create_time) = month(now())) purchaseMonth,
            (select sum(os.sales_total) from od_sales os) salesCount,
            (select sum(os.sales_total) from od_sales os where year(os.create_time) = year(now())) salesYear,
            (select sum(os.sales_total) from od_sales os where year(os.create_time) = year(now()) and month(os.create_time) = month(now())) salesMonth
    </select>

</mapper>